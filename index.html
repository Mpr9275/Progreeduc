<!DOCTYPE html>  
<html lang="fr">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">  
    <meta name="apple-mobile-web-app-capable" content="yes">  
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">  
    <link rel="apple-touch-icon" href="https://i.postimg.cc/GpY54myT/POULP-icone.png">
    <meta name="apple-mobile-web-app-title" content="POULP">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" sizes="192x192" href="https://i.postimg.cc/GpY54myT/POULP-icone.png">
    <link rel="icon" sizes="512x512" href="https://i.postimg.cc/GpY54myT/POULP-icone.png">
    <meta name="theme-color" content="#2563eb">
    <title>G√©n√©rateur de Programmes de R√©√©ducation</title>
    <link rel="stylesheet" href="styles.css">
</head>  
<body>  
    <div id="app">  
        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
             HEADER COMPACT - Version Flat Medical
             ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <header role="banner">
            <div class="header-content">
                <img src="https://onceuponablind.fr/Images/logos/Poulp-header.png" 
                     alt="Logo POULP" 
                     class="header-logo">
                <div class="header-text">
                    <h1><strong>POULP</strong> G√©n√©rateur de Programmes de R√©√©ducation</h1>
                    <p>Service de M√©decine Physique et R√©adaptation</p>
                </div>
                <button 
                    onclick="app.showView('admin')" 
                    class="btn-admin"
                    aria-label="Administration des exercices et programmes"
                >
                    <span aria-hidden="true">‚öôÔ∏è</span>
                </button>
            </div>
            <!-- Logo MPR visible uniquement sur desktop -->
            <img src="https://i.postimg.cc/MTR20ftk/Logo_MPR.jpg" 
                 alt="Logo Service MPR Percy" 
                 class="header-logo-mpr">
        </header>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
             NAVIGATION PRINCIPALE - Bottom bar mobile / Top bar desktop
             ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <nav class="main-nav" aria-label="Navigation principale">
            <button 
                onclick="app.showView('search')" 
                class="nav-btn"
                aria-label="Aller √† la recherche d'exercices"
            >
                <span class="nav-icon" aria-hidden="true">üîç</span>
                <span class="nav-label">Recherche</span>
            </button>
            
            <button 
                onclick="app.showView('programs')" 
                class="nav-btn"
                aria-label="Aller aux programmes types"
            >
                <span class="nav-icon" aria-hidden="true">üìã</span>
                <span class="nav-label">Programmes</span>
            </button>
            
            <button 
                onclick="Document.generateDocument()" 
                class="nav-btn nav-btn-primary"
                aria-label="G√©n√©rer le document PDF du programme"
            >
                <span class="nav-icon" aria-hidden="true">üìÑ</span>
                <span class="nav-label">
                    G√©n√©rer
                    <span class="nav-counter" id="nav-pdf-counter" aria-live="polite">0</span>
                </span>
            </button>
        </nav>

        <div id="alert-container" role="status" aria-live="polite" aria-atomic="true"></div>  

        <main role="main">  
            <!-- Vue Recherche -->  
            <div id="view-search" class="container">  
                <section class="section" aria-label="Introduction">  
                    <h2 tabindex="-1">Bienvenue dans POULP</h2>
                    <p style="font-size: 1rem; line-height: 1.6; color: #374151; margin-bottom: 1.5rem;">  
                        <strong>Bienvenue !</strong> Voici POULP, le g√©n√©rateur de programme de r√©√©ducation. Choisissez des exercices adapt√©s √† votre patient √† l'aide du formulaire de recherche, commentez les exercices s√©lectionn√©s et g√©n√©rez un fichier PDF pr√™t √† envoyer par e-mail.  
                    </p>  
                </section>  

                <section class="section" aria-label="Filtres de recherche">  
                    <h2 tabindex="-1">Comment chercher vos exercices ?</h2>

                    <p style="font-size: 0.875rem; color: #6b7280; margin-bottom: 1.5rem;">
                        <strong>Deux m√©thodes au choix :</strong>
                    </p>

                    <!-- Alerte si filtres invalides -->
                    <div id="filter-alert" role="alert" aria-live="assertive" class="filter-alert hidden">
                        ‚ö†Ô∏è Veuillez d'abord s√©lectionner au moins une zone du corps
                    </div>

                    <!-- V20.7a - M√âTHODE 1 : Recherche libre -->
                    <div style="margin-bottom: 2rem;">
                        <h3 style="font-size: 1rem; font-weight: 600; margin-bottom: 0.5rem; color: #1f2937;">
                            üîç M√©thode 1 : Recherche libre
                        </h3>
                        <p style="font-size: 0.875rem; color: #6b7280; margin-bottom: 0.75rem;">
                            Tapez un ou plusieurs mots-cl√©s (ex. : genou, √©tirement, renforcement)
                        </p>
                        
                        <div class="filter-group">  
                            <label class="filter-title" id="titre-recherche" for="search-input">Recherche par mot-cl√©</label>
                            <input   
                                type="search"   
                                id="search-input"   
                                placeholder="Titre, description..."  
                                oninput="Filters.filterExercises()"
                            >  
                        </div>
                    </div>

                    <!-- V20.7a - M√âTHODE 2 : Filtres cibl√©s -->
                    <div>
                        <h3 style="font-size: 1rem; font-weight: 600; margin-bottom: 0.5rem; color: #1f2937;">
                            üéØ M√©thode 2 : Filtres cibl√©s (tamis)
                        </h3>
                        <p style="font-size: 0.875rem; color: #6b7280; margin-bottom: 0.75rem;">
                            Affinez par zone du corps, type d'exercice et mat√©riel disponible
                        </p>

                        <div class="filter-group">  
                            <h4 class="filter-title" id="titre-zones" style="margin: 0 0 0.5rem 0; font-size: 1rem;">Zones du corps ‚Äì obligatoire</h4>
                            <div class="checkbox-group" id="zones-filter" role="group" aria-labelledby="titre-zones"></div>  
                        </div>  

                        <div class="collapsible-section">  
                            <div class="collapsible-header" onclick="app.toggleCollapsible('types-content')" aria-expanded="false" aria-controls="types-content">  
                                <h4 class="filter-title" id="titre-types" style="margin: 0; font-size: 1rem;">Types d'exercice <span class="optional-badge">facultatif</span></h4>
                                <span class="collapsible-icon">‚ñº</span>  
                            </div>  
                            <div class="collapsible-content" id="types-content">  
                                <div class="checkbox-group" id="types-filter" role="group" aria-labelledby="titre-types"></div>  
                            </div>  
                        </div>  

                        <div class="collapsible-section">  
                            <div class="collapsible-header" onclick="app.toggleCollapsible('materiel-content')" aria-expanded="false" aria-controls="materiel-content">  
                                <h4 class="filter-title" id="titre-materiel" style="margin: 0; font-size: 1rem;">Mat√©riel <span class="optional-badge">facultatif</span></h4>
                                <span class="collapsible-icon">‚ñº</span>  
                            </div>  
                            <div class="collapsible-content" id="materiel-content">  
                                <div class="checkbox-group" id="materiel-filter" role="group" aria-labelledby="titre-materiel"></div>  
                            </div>  
                        </div>
                    </div>  
                </section>  

                <section class="section" aria-label="R√©sultats de recherche">  
                    <h2 tabindex="-1">Exercices disponibles (<span id="results-count">0</span>)</h2>  
                    <p style="font-size: 0.875rem; color: #6b7280; margin-bottom: 0.75rem;">  
                        S√©lectionnez des exercices pour les ajouter au programme en cours.
                    </p>  
                    <div id="results-list" role="list"></div>  
                </section>  

                <!-- Section Programme -->  
                <section class="section" aria-label="Programme en cours" id="section-programme">  
                    <h2 id="titre-programme" tabindex="-1">Programme en cours (<span id="program-count">0</span> exercice<span id="program-plural">s</span>)</h2>  
                      
                    <p style="font-size: 0.875rem; color: #6b7280; margin-bottom: 0.75rem;">  
                        Vos exercices s√©lectionn√©s apparaissent ici. Personnalisez, r√©organisez et commentez-les avant de g√©n√©rer le document.
                    </p>

                    <h3 style="font-size: 1rem; font-weight: 600; margin-bottom: 0.75rem;">Exercices du programme</h3>

                    <!-- Descriptif du programme en lecture seule (si pr√©sent) -->
                    <div id="program-description-display" class="hidden">
                        <h4 style="font-size: 0.875rem; font-weight: 600; margin-bottom: 0.5rem;">
                            Descriptif du programme type
                        </h4>
                        <p id="program-description-text" style="white-space: pre-line; color: #374151; line-height: 1.6; margin-bottom: 0.5rem;"></p>
                        <hr style="margin: 1rem 0; border: none; border-top: 1px solid #e5e7eb;">
                    </div>
                      
                    <div id="selected-list" role="list" aria-labelledby="titre-programme"></div>
                      
                    <h3 style="font-size: 1rem; font-weight: 600; margin: 1.5rem 0 0.5rem 0;">Personnalisation du document</h3>  
                      
                    <p style="font-size: 0.875rem; color: #6b7280; margin-bottom: 0.75rem;">  
                        Ajoutez un commentaire g√©n√©ral et un descriptif du programme pour votre patient qui seront incorpor√©s au document.
                    </p>  
                      
                    <div class="form-group">  
                        <label for="patient-name">Pr√©nom du patient <span class="optional-badge">facultatif</span></label>  
                        <input   
                            type="text"   
                            id="patient-name"   
                            placeholder="Ex : Marie"  
                            onkeydown="if(event.key === 'Enter') event.preventDefault()"  
                        >  
                    </div>  

                    <div class="form-group">  
                        <label for="custom-message">Message personnalis√© g√©n√©ral <span class="optional-badge">facultatif</span></label>  
                        <textarea   
                            id="custom-message"   
                            rows="4"   
                            placeholder="Ex : Pensez √† bien vous hydrater pendant les exercices"
                        ></textarea>  
                    </div>

                    <div class="form-group">
                        <label for="program-type-description">Descriptif du programme <span class="optional-badge">facultatif</span></label>
                        <textarea 
                            id="program-type-description" 
                            rows="6" 
                            placeholder="Ex : Programme de 3 semaines, 2 fois par jour, pour retrouver la mobilit√©"
                            oninput="Document.updateDescriptionDisplay()"
                        ></textarea>
                    </div>

                    <!-- ‚ö†Ô∏è BOUTON G√âN√âRER SUPPRIM√â - Remplac√© par la barre de navigation -->
                </section>  
            </div>  

            <!-- Vue Programmes types -->
            <div id="view-programs" class="container hidden">
                <section class="section" aria-label="Programmes types">
                    <h2 tabindex="-1">Programmes types</h2>
                    
                    <!-- V20.7a - Introduction concise -->
                    <p style="line-height: 1.6; margin-bottom: 1rem; color: #374151;">
                        Gagnez du temps avec des programmes pr√©-configur√©s pour des pathologies courantes. 
                        Chargez un mod√®le, puis personnalisez-le pour votre patient.
                    </p>
                    
                    <p style="font-size: 0.875rem; color: #6b7280; margin-bottom: 0.75rem;">
                        <strong>Recherchez un programme :</strong>
                    </p>

                    <!-- Recherche textuelle -->
                    <div class="filter-group">
                        <h3 class="filter-title" id="titre-recherche-prog">Recherche par mot-cl√©</h3>
                        <input 
                            type="search" 
                            id="program-search-input" 
                            placeholder="Titre, descriptif, tags..."
                            oninput="Programs.filterPrograms()"
                            aria-labelledby="titre-recherche-prog"
                        >
                    </div>

                    <!-- Filtres par tags -->
                    <div class="collapsible-section">
                        <div class="collapsible-header" onclick="app.toggleCollapsible('program-tags-content')" aria-expanded="false" aria-controls="program-tags-content">
                            <h3 class="filter-title" style="margin: 0; font-size: 1rem;">Filtres par tags <span class="optional-badge">facultatif</span></h3>
                            <span class="collapsible-icon">‚ñº</span>
                        </div>
                        <div class="collapsible-content" id="program-tags-content">
                            <div class="filter-group">
                                <label id="label-localisation">Localisation</label>
                                <div class="checkbox-group" id="program-filter-localisation" role="group" aria-labelledby="label-localisation"></div>
                            </div>

                            <div class="filter-group">
                                <label id="label-pathologie">Pathologie</label>
                                <div class="checkbox-group" id="program-filter-pathologie" role="group" aria-labelledby="label-pathologie"></div>
                            </div>

                            <div class="filter-group">
                                <label id="label-phase">Phase</label>
                                <div class="checkbox-group" id="program-filter-phase" role="group" aria-labelledby="label-phase"></div>
                            </div>

                            <div class="filter-group">
                                <label id="label-objectif">Objectif</label>
                                <div class="checkbox-group" id="program-filter-objectif" role="group" aria-labelledby="label-objectif"></div>
                            </div>
                        </div>
                    </div>

                    <h3 style="font-size: 1rem; font-weight: 600; margin: 1rem 0 0.5rem 0;">
                        Programmes (<span id="programs-count">0</span>)
                    </h3>
                    <div id="programs-list" role="list"></div>
                </section>
            </div>

            <!-- Vue Admin - V20.5 avec sous-navigation -->  
            <div id="view-admin" class="container hidden">  
                <section class="section">  
                    <h2 tabindex="-1">Administration</h2>  
                    
                    <!-- Sous-navigation Admin -->
                    <nav class="admin-tabs" aria-label="Navigation administration">
                        <button 
                            id="admin-tab-exercises" 
                            class="admin-tab active" 
                            onclick="Admin.showAdminView('exercises')"
                            aria-label="Administrer les exercices"
                        >
                            üìù Exercices
                        </button>
                        <button 
                            id="admin-tab-programs" 
                            class="admin-tab" 
                            onclick="Admin.showAdminView('programs')"
                            aria-label="Administrer les programmes types"
                        >
                            üìã Programmes types
                        </button>
                    </nav>

                    <!-- Sous-vue : Admin Exercices -->
                    <div id="admin-view-exercises" class="admin-subview">
                        <!-- V20.7a - Titre VoiceOver principal -->
                        <h3 class="sr-only">Administration des exercices</h3>
                        
                        <!-- V20.7a-bis - Titre VoiceOver action Ajouter -->
                        <h4 class="sr-only">Ajouter un exercice</h4>
                        <button class="btn-primary" onclick="AdminExercises.openModal()" style="margin-bottom: 1rem;" aria-label="Ajouter un nouvel exercice">  
                            ‚ûï Ajouter un exercice  
                        </button>  

                        <!-- V20.7a - Titre VoiceOver zone de recherche -->
                        <h4 class="sr-only">Recherche d'exercices</h4>
                        <div class="filter-group">  
                            <label for="admin-search">Rechercher un exercice</label>  
                            <input   
                                type="search"   
                                id="admin-search"   
                                placeholder="Titre, description..."  
                                oninput="AdminExercises.updateList()"
                            >  
                        </div>  

                        <h4 class="sr-only">Liste des exercices</h4>
                        <div id="admin-exercises-list"></div>
                    </div>

                    <!-- Sous-vue : Admin Programmes types -->
                    <div id="admin-view-programs" class="admin-subview hidden">
                        <!-- V20.7a - Titre VoiceOver principal -->
                        <h3 class="sr-only">Administration des programmes types</h3>
                        
                        <!-- V20.7a-bis - Titre VoiceOver action Ajouter -->
                        <h4 class="sr-only">Ajouter un programme type</h4>
                        <button class="btn-primary" onclick="AdminPrograms.openModal()" style="margin-bottom: 1rem;" aria-label="Ajouter un nouveau programme type">
                            ‚ûï Ajouter un programme type
                        </button>

                        <!-- V20.7a - Titre VoiceOver zone de recherche -->
                        <h4 class="sr-only">Recherche de programmes</h4>
                        <div class="filter-group">
                            <label for="admin-programs-search">Rechercher un programme type</label>
                            <input 
                                type="search" 
                                id="admin-programs-search" 
                                placeholder="Titre, tags..."
                                oninput="AdminPrograms.updateList()"
                            >
                        </div>

                        <h4 class="sr-only">Liste des programmes types</h4>
                        <div id="admin-programs-list"></div>
                    </div>
                </section>
            </div>  

            <!-- Vue Document g√©n√©r√© -->  
            <div id="view-document" class="hidden">  
                <div class="no-print" style="position: fixed; top: 0; left: 0; right: 0; background: #2563eb; color: white; padding: 1rem; z-index: 100;">  
                    <!-- MESSAGE INFORMATIF -->  
                    <div role="note" style="max-width: 1200px; margin: 0 auto 0.75rem; font-size: 0.875rem; background: rgba(255,255,255,0.15); padding: 0.75rem; border-radius: 0.375rem; line-height: 1.5;">  
                        üí° <strong>Pour envoyer par email :</strong> Utilisez "Imprimer / Partager", puis enregistrez le PDF et joignez-le en pi√®ce jointe (les images s'afficheront correctement).  
                    </div>  
                      
                    <!-- BOUTONS D'ACTION -->  
                    <!-- V20.7c - Titre VoiceOver pour actions document -->
                    <h3 class="sr-only">Actions du document</h3>
                    <div style="display: flex; gap: 0.5rem; max-width: 1200px; margin: 0 auto;">  
                        <button onclick="app.showView('search')" style="background: white; color: #2563eb; border: none; padding: 0.75rem 1rem; border-radius: 0.375rem; font-weight: 600;" aria-label="Retourner √† la recherche">  
                            ‚Üê Retour  
                        </button>  
                        <button onclick="window.print()" style="background: #059669; color: white; border: none; padding: 0.75rem 1rem; border-radius: 0.375rem; font-weight: 600; flex: 1;" aria-label="Imprimer ou partager le document">  
                            üñ®Ô∏è Imprimer / Partager  
                        </button>  
                    </div>  
                </div>  
                <div class="document-content" id="document-content" style="max-width: 800px; margin: 5rem auto 2rem;"></div>  
            </div>  
        </main>  

        <!-- Modal Exercice -->  
        <div id="exercise-modal" class="modal" role="dialog" aria-labelledby="modal-title" aria-modal="true">  
            <div class="modal-content">  
                <div class="modal-header">  
                    <h2 id="modal-title">Ajouter un exercice</h2>  
                    <button class="close-btn" onclick="AdminExercises.closeModal()" aria-label="Fermer la fen√™tre">&times;</button>  
                </div>  
                <form id="exercise-form" onsubmit="AdminExercises.save(event)">  
                    <fieldset style="border: none; padding: 0; margin: 0;">  
                        <legend class="sr-only">Informations de base</legend>  
                          
                        <div class="form-group">  
                            <label for="ex-titre">Titre de l'exercice *</label>  
                            <input type="text" id="ex-titre" required aria-required="true">  
                        </div>  

                        <div class="form-group">  
                            <label for="ex-description">Description d√©taill√©e *</label>  
                            <textarea id="ex-description" rows="3" required aria-required="true"></textarea>  
                        </div>  
                    </fieldset>  

                    <fieldset style="border: 1px solid #e5e7eb; padding: 1rem; margin: 1rem 0; border-radius: 0.5rem;">  
                        <legend style="font-weight: 600; padding: 0 0.5rem;">Classification de l'exercice</legend>  
                          
                        <div class="form-group">  
                            <label id="label-zones">Zones du corps concern√©es *</label>  
                            <div class="checkbox-group" id="modal-zones" role="group" aria-labelledby="label-zones" aria-required="true"></div>  
                        </div>  

                        <div class="form-group">  
                            <label id="label-types">Types d'exercice *</label>  
                            <div class="checkbox-group" id="modal-types" role="group" aria-labelledby="label-types" aria-required="true"></div>  
                            <div style="margin-top: 0.75rem; padding: 0.75rem; background: #f9fafb; border-radius: 0.375rem;">  
                                <label for="new-type-input" style="font-size: 0.875rem; margin-bottom: 0.5rem;">Ajouter un nouveau type :</label>  
                                <div style="display: flex; gap: 0.5rem;">  
                                    <input type="text" id="new-type-input" placeholder="Ex: Cardio" style="flex: 1;">  
                                    <button type="button" class="btn-secondary btn-small" onclick="AdminExercises.addNewType()">Ajouter</button>  
                                </div>  
                            </div>  
                        </div>  

                        <div class="form-group">  
                            <label id="label-materiel">Mat√©riel n√©cessaire</label>  
                            <div class="checkbox-group" id="modal-materiel" role="group" aria-labelledby="label-materiel"></div>  
                            <div style="margin-top: 0.75rem; padding: 0.75rem; background: #f9fafb; border-radius: 0.375rem;">  
                                <label for="new-materiel-input" style="font-size: 0.875rem; margin-bottom: 0.5rem;">Ajouter du nouveau mat√©riel :</label>  
                                <div style="display: flex; gap: 0.5rem;">  
                                    <input type="text" id="new-materiel-input" placeholder="Ex: Rouleau de massage" style="flex: 1;">  
                                    <button type="button" class="btn-secondary btn-small" onclick="AdminExercises.addNewMateriel()">Ajouter</button>  
                                </div>  
                            </div>  
                        </div>  
                    </fieldset>  

                    <fieldset style="border: 1px solid #e5e7eb; padding: 1rem; margin: 1rem 0; border-radius: 0.5rem;">  
                        <legend style="font-weight: 600; padding: 0 0.5rem;">Photos de l'exercice</legend>  
                          
                        <div class="form-group">  
                            <label for="photo-url">URL de la photo *</label>  
                            <div style="display: flex; gap: 0.5rem;">  
                                <input type="text" id="photo-url" placeholder="https://..." style="flex: 1;" onkeydown="if(event.key === 'Enter') { event.preventDefault(); AdminExercises.addPhoto(); }">  
                                <button type="button" class="btn-secondary btn-small" onclick="AdminExercises.addPhoto()">Ajouter</button>  
                            </div>  
                        </div>  

                        <div class="photo-list" id="photos-list">  
                            <div style="padding: 1rem; text-align: center; color: #6b7280;">Aucune photo ajout√©e</div>  
                        </div>  
                    </fieldset>  

                    <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">  
                        <button type="button" class="btn-secondary" onclick="AdminExercises.closeModal()" style="flex: 1;">  
                            Annuler  
                        </button>  
                        <button type="submit" class="btn-primary" style="flex: 1;">  
                            Enregistrer  
                        </button>  
                    </div>  
                </form>  
            </div>  
        </div>

        <!-- Modal Programme Type -->
        <div id="program-type-modal" class="modal" role="dialog" aria-labelledby="program-modal-title" aria-modal="true">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="program-modal-title">Ajouter un programme type</h2>
                    <button class="close-btn" onclick="AdminPrograms.closeModal()" aria-label="Fermer la fen√™tre">&times;</button>
                </div>
                <form id="program-type-form" onsubmit="AdminPrograms.save(event)">
                    <div class="form-group">
                        <label for="prog-titre">Titre du programme *</label>
                        <input type="text" id="prog-titre" required aria-required="true">
                    </div>

                    <div class="form-group">
                        <label for="prog-descriptif">Descriptif *</label>
                        <textarea id="prog-descriptif" rows="6" required aria-required="true" placeholder="Objectifs, fr√©quence, dur√©e..."></textarea>
                    </div>

                    <fieldset style="border: 1px solid #e5e7eb; padding: 1rem; margin: 1rem 0; border-radius: 0.5rem;">
                        <legend style="font-weight: 600; padding: 0 0.5rem;">Tags du programme</legend>

                        <div class="form-group">
                            <label for="prog-localisation">Localisation *</label>
                            <input type="text" id="prog-localisation" required aria-required="true" placeholder="Ex: Genou">
                        </div>

                        <div class="form-group">
                            <label for="prog-pathologie">Pathologie *</label>
                            <input type="text" id="prog-pathologie" required aria-required="true" placeholder="Ex: Post-op√©ratoire">
                        </div>

                        <div class="form-group">
                            <label for="prog-phase">Phase *</label>
                            <input type="text" id="prog-phase" required aria-required="true" placeholder="Ex: Pr√©coce (J0-J21)">
                        </div>

                        <div class="form-group">
                            <label for="prog-objectif">Objectif *</label>
                            <input type="text" id="prog-objectif" required aria-required="true" placeholder="Ex: Renforcement + Mobilit√©">
                        </div>
                    </fieldset>

                    <fieldset style="border: 1px solid #e5e7eb; padding: 1rem; margin: 1rem 0; border-radius: 0.5rem;">
                        <legend style="font-weight: 600; padding: 0 0.5rem;">Exercices du programme</legend>
                        
                        <div class="form-group">
                            <label for="prog-ex-search">Rechercher des exercices</label>
                            <input 
                                type="search" 
                                id="prog-ex-search" 
                                placeholder="Titre, description..." 
                                oninput="AdminPrograms.filterExercises()"
                                aria-label="Rechercher des exercices √† ajouter au programme"
                            >
                        </div>

                        <div style="max-height: 300px; overflow-y: auto; border: 1px solid #e5e7eb; border-radius: 0.375rem; padding: 0.5rem;">
                            <div id="prog-ex-list" role="group" aria-label="Liste des exercices disponibles"></div>
                        </div>

                        <p style="font-size: 0.875rem; color: #2563eb; margin-top: 0.75rem; font-weight: 600;">
                            <span id="prog-ex-count">0</span> exercice(s) s√©lectionn√©(s)
                        </p>
                    </fieldset>

                    <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                        <button type="button" class="btn-secondary" onclick="AdminPrograms.closeModal()" style="flex: 1;">
                            Annuler
                        </button>
                        <button type="submit" class="btn-primary" style="flex: 1;">
                            Enregistrer
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Modal Photos -->
        <div id="photos-modal" class="modal" role="dialog" aria-labelledby="photos-modal-title" aria-modal="true">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="photos-modal-title">Photos de l'exercice</h2>
                    <button class="close-btn" onclick="PhotosViewer.close()" aria-label="Fermer la fen√™tre">&times;</button>
                </div>
                <div style="padding: 1rem;">
                    <div style="text-align: center; margin-bottom: 1rem;">
                        <img id="photo-viewer-img" src="" alt="" style="max-width: 100%; height: auto; border-radius: 0.5rem;">
                    </div>
                    <div style="text-align: center; color: #6b7280; font-size: 0.875rem; margin-bottom: 1rem;">
                        <span id="photo-counter">Photo 1 sur 1</span>
                    </div>
                    <div id="photo-navigation" style="display: flex; gap: 0.5rem; justify-content: center;">
                        <button class="btn-secondary" onclick="PhotosViewer.prev()" id="photo-prev-btn" aria-label="Photo pr√©c√©dente">
                            ‚Üê Pr√©c√©dent
                        </button>
                        <button class="btn-secondary" onclick="PhotosViewer.next()" id="photo-next-btn" aria-label="Photo suivante">
                            Suivant ‚Üí
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>  

    <script src="data/categories.js"></script>
    <script src="data/exercices1.js"></script>
    <script src="data/exercices2.js"></script>
    <script src="data/exercices3.js"></script>
    <script src="data/exercices4.js"></script>
    <script src="data/programmes_types.js"></script>
    <script src="js/app.js"></script>
    <script src="js/filters.js"></script>
    <script src="js/programs.js"></script>
    <script src="js/document.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/admin-exercises.js"></script>
    <script src="js/admin-programs.js"></script>
    <script src="js/photos-viewer.js"></script>
</body>  
</html>
